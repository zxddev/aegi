# Tasks

- [x] 1. 新增 `_cosine_similarity()` 和 `_token_similarity()` 函数
- [x] 2. `build_narratives_with_uids` 新增 `embeddings` 参数
- [x] 3. 新增 `abuild_narratives_with_uids` async 版本
- [x] 4. 现有 11 个测试全部通过（向后兼容验证）
- [x] 5. 全量 193 passed / 15 skipped / 0 failed
- [x] 6. ruff check + format clean
